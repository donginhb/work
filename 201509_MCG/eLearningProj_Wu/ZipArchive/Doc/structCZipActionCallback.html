<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ZipArchive: CZipActionCallback Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff" leftmargin="32" marginwidth="32" topmargin="32" marginheight="32">
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>CZipActionCallback Struct Reference</h1>Derive from this a class to be used as a callback functors when adding, extracting, deleting, testing a file or saving central directory.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="ZipStorage_8h-source.html">ZipStorage.h</a>&gt;</code>
<p>
Inheritance diagram for CZipActionCallback:<p><center><img src="structCZipActionCallback__inherit__graph.gif" border="0" usemap="#CZipActionCallback__inherit__map" alt="Inheritance graph"></center>
<map name="CZipActionCallback__inherit__map">
<area href="structCZipCallback.html" shape="rect" coords="20,16,140,80" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="structCZipActionCallback-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipActionCallback.html#a1">Init</a> (LPCTSTR lpszFileInZip=NULL, LPCTSTR lpszExternalFile=NULL)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used by the ZipArchive library to init the callback function with the filenames.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipActionCallback.html#a2">SetTotal</a> (DWORD uTotalToDo)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by the ZipArchive functions that use the callback feature after calculating total data to process.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">DWORD&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipActionCallback.html#a3">LeftToDo</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a4" doxytag="CZipActionCallback::CallbackEnd"></a>
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipActionCallback.html#a4">CallbackEnd</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called after the action finishes (it is not called in case of an exception, but it is called before throwing <a class="el" href="classCZipException.html#w26w6">CZipException::abortedAction</a> or <a class="el" href="classCZipException.html#w26w7">CZipException::abortedSafely</a>). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a5" doxytag="CZipActionCallback::operator()"></a>
virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipActionCallback.html#a5">operator()</a> (int iProgress)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used internally to call Callback and increase <a class="el" href="structCZipActionCallback.html#o2">m_uTotalSoFar</a> by <em>iProgress</em>. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipActionCallback.html#a6">GetStep</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used internally to return <a class="el" href="structCZipActionCallback.html#s0">m_iStep</a> value but not 0 (return 1 in this case).  <a href="#a6"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipActionCallback.html#o0">m_iType</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The type of the callback.  <a href="#o0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">DWORD&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipActionCallback.html#o1">m_uTotalToDo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Total number of data to process.  <a href="#o1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="o2" doxytag="CZipActionCallback::m_uTotalSoFar"></a>
DWORD&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipActionCallback.html#o2">m_uTotalSoFar</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">total number of bytes processed so far <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="o3" doxytag="CZipActionCallback::m_szFileInZip"></a>
CZipString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipActionCallback.html#o3">m_szFileInZip</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">file in zip archive being currently processed <br></td></tr>
<tr><td colspan="2"><br><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipActionCallback.html#s0">m_iStep</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used only when creating map before deletion (see <a class="el" href="classCZipArchive.html#w41w5">CZipArchive::cbDeleteCnt</a>) or saving the central directory record.  <a href="#s0"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Derive from this a class to be used as a callback functors when adding, extracting, deleting, testing a file or saving central directory. 
<p>
You need to override member function <a class="el" href="structCZipCallback.html#a0">CZipCallback::Callback</a>. The meaning of <em>iProgress</em> parameter is the count of data just processed. It is a smallest number of bytes after which the callback method is called and it depends on the value of <em>nBufSize</em> in the <a class="el" href="classCZipArchive.html">CZipArchive</a> methods that uses the callback feature. In case of saving the central directory action it is the count of file headers just written (see <a class="el" href="classCZipArchive.html#w41w8">CZipArchive::cbSave</a>) <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structCZipCallback.html#a0">CZipCallback::Callback</a> <p>
<a class="el" href="classCZipArchive.html#a6">CZipArchive::SetCallback</a> </dd></dl>

<p>

<p>
Definition at line <a class="el" href="ZipStorage_8h-source.html#l00101">101</a> of file <a class="el" href="ZipStorage_8h-source.html">ZipStorage.h</a>.<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a6" doxytag="CZipActionCallback::GetStep"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int CZipActionCallback::GetStep           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Used internally to return <a class="el" href="structCZipActionCallback.html#s0">m_iStep</a> value but not 0 (return 1 in this case). 
<p>

<p>
Definition at line <a class="el" href="ZipStorage_8h-source.html#l00194">194</a> of file <a class="el" href="ZipStorage_8h-source.html">ZipStorage.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="CZipActionCallback::Init"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void CZipActionCallback::Init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszFileInZip</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>LPCTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszExternalFile</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Used by the ZipArchive library to init the callback function with the filenames. 
<p>
Resets <a class="el" href="structCZipActionCallback.html#o1">m_uTotalToDo</a> and <a class="el" href="structCZipActionCallback.html#o2">m_uTotalSoFar</a> variables to 0. <a class="el" href="structCZipActionCallback.html#o0">m_iType</a> variable is already set to the proper value. Called at the beginning of the action.
<p>
Definition at line <a class="el" href="ZipStorage_8h-source.html#l00120">120</a> of file <a class="el" href="ZipStorage_8h-source.html">ZipStorage.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="CZipActionCallback::LeftToDo"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">DWORD CZipActionCallback::LeftToDo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Returns:</b></dt><dd>the number of bytes left to process</dd></dl>

<p>
Definition at line <a class="el" href="ZipStorage_8h-source.html#l00159">159</a> of file <a class="el" href="ZipStorage_8h-source.html">ZipStorage.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="CZipActionCallback::SetTotal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void CZipActionCallback::SetTotal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DWORD&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>uTotalToDo</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called by the ZipArchive functions that use the callback feature after calculating total data to process. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>uTotalToDo</em>&nbsp;</td><td>total data to process; set <a class="el" href="structCZipActionCallback.html#o1">m_uTotalToDo</a> to this value</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="ZipStorage_8h-source.html#l00133">133</a> of file <a class="el" href="ZipStorage_8h-source.html">ZipStorage.h</a>.    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="s0" doxytag="CZipActionCallback::m_iStep"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="structCZipActionCallback.html#s0">CZipActionCallback::m_iStep</a><code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Used only when creating map before deletion (see <a class="el" href="classCZipArchive.html#w41w5">CZipArchive::cbDeleteCnt</a>) or saving the central directory record. 
<p>
You'll be notified every nth step (n is <em>m_iStep</em> value) with <em>iProgress</em> set to <em>m_iStep</em> . Do not set it to low values or you can have a long waiting on archives with huge number of files.<p>
<b>Default:</b> 256.
<p>
Definition at line <a class="el" href="ZipStorage_8h-source.html#l00188">188</a> of file <a class="el" href="ZipStorage_8h-source.html">ZipStorage.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o0" doxytag="CZipActionCallback::m_iType"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="structCZipActionCallback.html#o0">CZipActionCallback::m_iType</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The type of the callback. 
<p>
It is set to one of <a class="el" href="classCZipArchive.html#w41">CZipArchive::CallbackType</a> values when the action begins. It's useful if you have more than one callback assigned to the same functor.
<p>
Definition at line <a class="el" href="ZipStorage_8h-source.html#l00114">114</a> of file <a class="el" href="ZipStorage_8h-source.html">ZipStorage.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o1" doxytag="CZipActionCallback::m_uTotalToDo"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">DWORD <a class="el" href="structCZipActionCallback.html#o1">CZipActionCallback::m_uTotalToDo</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Total number of data to process. 
<p>
The value of this variable is set after calling by the library <a class="el" href="structCZipActionCallback.html#a2">SetTotal</a> method (it is 0 before). Depending on the action it is set then to:<ul>
<li>adding file: the size the external file being added (or if callback is <a class="el" href="classCZipArchive.html#w41w2">CZipArchive::cbAddTmp</a>, the size of compressed data: <a class="el" href="classCZipFileHeader.html#o8">CZipFileHeader::m_uComprSize</a>)</li><li>extracting file: the size of uncompressed data (<a class="el" href="classCZipFileHeader.html#o9">CZipFileHeader::m_uUncomprSize</a>)</li><li>testing file: the same as above</li><li>deleting file: the count of bytes to move - the size of all files to remain above the first file to delete (calculated from offsets <a class="el" href="classCZipFileHeader.html#o12">CZipFileHeader::m_uOffset</a></li><li>saving central directory: the number of files in the archive</li></ul>

<p>
Definition at line <a class="el" href="ZipStorage_8h-source.html#l00151">151</a> of file <a class="el" href="ZipStorage_8h-source.html">ZipStorage.h</a>.    </td>
  </tr>
</table>
<hr>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="ZipStorage_8h-source.html">ZipStorage.h</a></ul>
<hr><address><small>
ZipArchive Copyright &copy;&nbsp;2000-2005 <a href="mailto:tdracz@artpol-software.com"> Tadeusz Dracz </a>. Generated at Fri Aug 5 21:44:51 2005.
</small></address>
</body>
</html>
