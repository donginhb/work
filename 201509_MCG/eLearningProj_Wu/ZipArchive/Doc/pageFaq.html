<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ZipArchive: FAQ</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff" leftmargin="32" marginwidth="32" topmargin="32" marginheight="32">
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1><a class="anchor" name="pageFaq">FAQ</a></h1><a href="#q1">Q: I experience linking problems. What to do? </a><p>
<a href="#q13">Q: When do I need to purchase the commercial license? </a><p>
<a href="#q2">Q: When I open a multi-disk archive (Pkzip mode) and the last disk is not in the drive, I receive the CZipException::cdirNotFound exception. How to detect whether the last disk is in the drive? </a><p>
<a href="#q3">Q: Of what size should be a single volume in a multi-disk archive created in the TD span mode ? </a><p>
<a href="#q5">Q: How can I detect the disk spanning mode of an archive? </a><p>
<a href="#q7">Q: How to integrate the library with the sample application? </a><p>
<a href="#q8">Q: Why the library doesn't want to extract archives (mostly old)? </a><p>
<a href="#q9">Q: In CZipArchive::AddNewFile and CZipArchive::ExtractFile I want to use partial path for the filename inside the archive. </a><p>
<a href="#q10">Q: I want to create an archive that will be readable under Unix/Linux. </a><p>
<a href="#q11">Q: How can I use UNC path with CZipArchive::ExtractFile function ? </a><p>
<a href="#q12">Q: How to create a zip archive in memory and then write it to disk or read the archive from the disk and extract from memory ? </a><p>
<a href="#q14">Q: How can I extract or delete files that matches a specified wildcard pattern ? </a><p>
<a href="#q15">Q: Why an exception is thrown when I call CZipArchive::CloseFile ? </a><p>
<hr>
<p>
<a class="anchor" name="q1"></a> <b> Q: I experience linking problems. What to do? </b><p>
A: <dl compact><dt><b>If you get mostly LNK2005 : </b></dt><dd>If you changed the project configuration (e.g. from Release to Unicode Release), rebuild the projects. If you are still getting link errors, make sure that the library and your program are both using single-threaded or both multithreaded (or multithreaded DLL) run-time library. The option <em> Project-&gt;Settings-&gt; c/c++ -&gt;Code Generation-&gt;Use run-time library </em> should be set to the same value in the ZipArchive library and the program project options. Make sure that you link appropriate configurations (Release against Release, Debug against Debug...) and that you're using MFC library in the same way (shared, static or not using) in those configurations. </dd></dl>
<dl compact><dt><b>If you get LNK1104 (e.g. cannot open file "mfc42u.lib")</b></dt><dd>You're trying to compile the Unicode version but you haven't installed the necessary libraries. When installing Visual C++ Professional for example, you need to check the boxes "Static Libraries for Unicode" and "Shared Libraries for Unicode". They are in "VC++ MFC and Template libraries\\MS Foundation Class Libraries". You don't need to reinstall the Visual Studio to add them.</dd></dl>
<a class="anchor" name="q13"></a> <b> Q: When do I need to purchase the commercial license? </b><p>
A: The ZipArchive library is distributed under GNU GPL which implies that it can only be used with software that is licensed under conditions compliant with the GPL. It means that you need to provide a customer with the source code of your software that uses the library. The commercial license removes this obligation. You can find out more at <a class="el" href="pageLic.html#s1">Alternative license for use with proprietary software</a>.<p>
<a class="anchor" name="q2"></a> <b> Q: When I open a multi-disk archive (Pkzip mode) and the last disk is not in the drive, I receive the <a class="el" href="classCZipException.html#w26w17">CZipException::cdirNotFound</a> exception. How to detect whether the last disk is in the drive? </b><p>
A: The last disk can not be detected before opening an archive. The only way to prevent the program from failing when an incorrect disk is inserted is to catch the <a class="el" href="classCZipException.html#w26w17">CZipException::cdirNotFound</a> exception while opening the archive and keep prompting the user to insert the last disk into the drive. Please see the sample application on how it can be done in details.<p>
<a class="anchor" name="q3"></a> <b> Q: Of what size should be a single volume in a multi-disk archive created in the TD span mode ? </b><p>
A: The size of the volume may be from 1 byte to the maximum integer value, and the bigger - the faster is creation and extraction (no file changes meantime), but the size of the whole archive is the same. The optimal solution is to set it to about the size of the diskette (a little less to be comfortable when there are bad sectors found on the disk) to allow the future conversion to PKZIP span mode.<p>
<a class="anchor" name="q5"></a> <b> Q: How can I detect the disk spanning mode of an archive? </b><p>
A: You need to open the archive and the call <a class="el" href="classCZipArchive.html#a42">CZipArchive::GetSpanMode</a>. When opening the archive in tdSpan mode on a removable device, you should set <em>iVolumeSize</em> to a non-zero value while opening the archive (with <a class="el" href="classCZipArchive.html#a9">CZipArchive::Open</a>). There is no universal way to distinguish a PKSpan archive from a TDSpan archive on a removable device, because they have identical internal structure.<p>
<a class="anchor" name="q7"></a> <b> Q: How to integrate the library with the sample application? </b><p>
A:The usual way is to put ZipArchive library at the same directory level what your project is, and then use one of the <a class="el" href="pageSyst.html#sectVisual">integration methods</a>. Make a directory structure like this: <br>
 
--- <BR>
&nbsp &nbsp |-ZipArc &nbsp &nbsp &nbsp &nbsp &nbsp // the application project <BR>
&nbsp &nbsp |-ZipArchive &nbsp // the ZipArchive library <BR>
<p>
You can now follow the integration method 1 or 2 (the easier one).<p>
<a class="anchor" name="q8"></a> <b> Q: Why the library doesn't want to extract archives (mostly old)? </b><p>
A: The common reason is that the data is compressed using <em>imploded</em> method (usually with old archivers). The only methods supported by the zlib library are <em>deflation</em> which is the most commonly used by archivers and <em>storing</em> which is in fact not a compression method. You can use a compiled ZipArc application to find out what method the file was compressed with (View-&gt;File Info)<p>
<a class="anchor" name="q9"></a> <b> Q: In <a class="el" href="classCZipArchive.html#a13">CZipArchive::AddNewFile</a> and <a class="el" href="classCZipArchive.html#a25">CZipArchive::ExtractFile</a> I want to use partial path for the filename inside the archive. For example:<br>
 When I compress some directory, like this: <em> c:\program files\example</em> (full directory path: <em>c:\program files\example\text\txt</em>) it comes with the whole path. I would like that the zip only get the <em>EXAMPLE\text\txt</em> path. </b><p>
A: You can set <em>bFullPath</em> argument to <code>false</code> in these functions and set the beginning part of the path that you commonly want to eliminate with <a class="el" href="classCZipArchive.html#a11">CZipArchive::SetRootPath</a> function. In the example above you'd set it to <em>c:\program files\ </em> (the path separator at the end is added automatically).<p>
<a class="anchor" name="q10"></a> <b> Q: I want to create an archive that will be readable under Unix/Linux. </b><p>
A: Inside the archive there is an information stored about the system it was created under. It helps converting the file attributes that are stored inside the archive to file attributes that are used on the system on which the file is extracted. Some Unix archivers cannot convert Windows attributes to Unix, so that it is needed to create the archive with the Unix attributes already (and the internal info about the system set to a Unix value). To achieve that, simply call <a class="el" href="classCZipArchive.html#a52">CZipArchive::SetSystemCompatibility</a> with the argument set to <a class="el" href="namespaceZipCompatibility.html#a22a3">ZipCompatibility::zcUnix</a> after creating the archive.<p>
<a class="anchor" name="q11"></a> <b> Q: How can I use UNC path with <a class="el" href="classCZipArchive.html#a25">CZipArchive::ExtractFile</a> function ? </b><p>
<div class="fragment"><pre class="fragment">
A: You need to replace \\\\ at the beginning of the UNC path with \\\\?\UNC\ .
</pre></div><p>
<a class="anchor" name="q12"></a> <b> Q: How to create a zip archive in memory and then write it to a disk or read the archive from the disk and extract from memory ? </b><p>
A: See <a class="el" href="pageGen.html#sectMemory">(de)compression in/from memory</a><p>
<a class="anchor" name="q14"></a> <b> Q: How can I extract or delete files that matches a specified wildcard pattern ? </b><p>
A: You need to build a CZipWordArray with <a class="el" href="classCZipArchive.html#a71">CZipArchive::FindMatches</a> and then:<ul>
<li>to delete: use the array as an argument to <a class="el" href="classCZipArchive.html#a35">CZipArchive::DeleteFiles</a></li><li>to extract: the array stores the indexes of the files to extract; you need to enumerate the array and pass the indexes one-by-one to <a class="el" href="classCZipArchive.html#a25">CZipArchive::ExtractFile</a> function</li></ul>
<p>
<a class="anchor" name="q15"></a> <b> Q: Why an exception is thrown when I call <a class="el" href="classCZipArchive.html#a32">CZipArchive::CloseFile</a> ? </b><p>
A: If you haven't exctracted all of the file contents (e.g. only the beginning) or you have encountered an exception during extraction, you need to call <a class="el" href="classCZipArchive.html#a32">CZipArchive::CloseFile</a> with <em>bAfterException</em> parameter set to <code>true</code> or call <a class="el" href="classCZipArchive.html#a30">CZipArchive::CloseFileWithNoUpdate</a> instead. <hr><address><small>
ZipArchive Copyright &copy;&nbsp;2000-2005 <a href="mailto:tdracz@artpol-software.com"> Tadeusz Dracz </a>. Generated at Fri Aug 5 21:44:52 2005.
</small></address>
</body>
</html>
