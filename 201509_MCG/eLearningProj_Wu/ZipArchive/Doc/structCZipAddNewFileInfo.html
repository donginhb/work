<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ZipArchive: CZipAddNewFileInfo Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff" leftmargin="32" marginwidth="32" topmargin="32" marginheight="32">
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>CZipAddNewFileInfo Struct Reference</h1>Structure used as a parameter in <a class="el" href="classCZipArchive.html#a13">CZipArchive::AddNewFile(CZipAddNewFileInfo&amp; )</a>; Use one of constructors provided and then adjust the member variables that are set to default values by <a class="el" href="structCZipAddNewFileInfo.html#a3">Defaults</a> method.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="ZipArchive_8h-source.html">ZipArchive.h</a>&gt;</code>
<p>
<a href="structCZipAddNewFileInfo-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a0" doxytag="CZipAddNewFileInfo::CZipAddNewFileInfo"></a>
&nbsp;</td><td class="memItemRight" valign="bottom"><b>CZipAddNewFileInfo</b> (LPCTSTR lpszFilePath, bool bFullPath=true)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a1" doxytag="CZipAddNewFileInfo::CZipAddNewFileInfo"></a>
&nbsp;</td><td class="memItemRight" valign="bottom"><b>CZipAddNewFileInfo</b> (LPCTSTR lpszFilePath, LPCTSTR lpszFileNameInZip)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a2" doxytag="CZipAddNewFileInfo::CZipAddNewFileInfo"></a>
&nbsp;</td><td class="memItemRight" valign="bottom"><b>CZipAddNewFileInfo</b> (CZipAbstractFile *pFile, LPCTSTR lpszFileNameInZip)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a3" doxytag="CZipAddNewFileInfo::Defaults"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipAddNewFileInfo.html#a3">Defaults</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set default values for <a class="el" href="structCZipAddNewFileInfo.html#o4">m_iSmartLevel</a>, <a class="el" href="structCZipAddNewFileInfo.html#o5">m_iReplaceIndex</a>, <a class="el" href="structCZipAddNewFileInfo.html#o6">m_nBufSize</a> and <a class="el" href="structCZipAddNewFileInfo.html#o3">m_iComprLevel</a>. <br></td></tr>
<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="o0" doxytag="CZipAddNewFileInfo::m_szFilePath"></a>
CZipString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipAddNewFileInfo.html#o0">m_szFilePath</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the full path to the file to be added; if it is empty you need to set <a class="el" href="structCZipAddNewFileInfo.html#o7">m_pFile</a> <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="o1" doxytag="CZipAddNewFileInfo::m_szFileNameInZip"></a>
CZipString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipAddNewFileInfo.html#o1">m_szFileNameInZip</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the file name that will be stored in the archive (if the file is a directory, there is a path separator automatically added at the end); #SetRootPath function has no effect on this parameter <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipAddNewFileInfo.html#o2">m_bFullPath</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">It has only the meaning when <a class="el" href="structCZipAddNewFileInfo.html#o1">m_szFileNameInZip</a> is not specified and <a class="el" href="structCZipAddNewFileInfo.html#o0">m_szFilePath</a> is not empty.  <a href="#o2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="o3" doxytag="CZipAddNewFileInfo::m_iComprLevel"></a>
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipAddNewFileInfo.html#o3">m_iComprLevel</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the compression level, see #OpenNewFile <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="o4" doxytag="CZipAddNewFileInfo::m_iSmartLevel"></a>
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipAddNewFileInfo.html#o4">m_iSmartLevel</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the smartness level of of the library; can be one or more #Smartness values (you can OR them);<br>
 if zipsmCheckForEff is specified and due to it the file needs to be reinserted into the archive without a compression and the callback functor is specified, the callback functor's method Callback is called with the first argument set to DWORD (-1) (you need to remember the last argument if you need the size of the file) <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipAddNewFileInfo.html#o5">m_iReplaceIndex</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the index of the existing file in the archive to be replaced by the file being added (the new file goes into the same physical place as the old file - the archive may of course grow or shrink as a result)  <a href="#o5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="o6" doxytag="CZipAddNewFileInfo::m_nBufSize"></a>
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipAddNewFileInfo.html#o6">m_nBufSize</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the size of the buffer used while file operations <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">CZipAbstractFile *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCZipAddNewFileInfo.html#o7">m_pFile</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">instead of from a physical file, the data for compression is taken from the CZipAbstractFile object (e.g.  <a href="#o7"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Structure used as a parameter in <a class="el" href="classCZipArchive.html#a13">CZipArchive::AddNewFile(CZipAddNewFileInfo&amp; )</a>; Use one of constructors provided and then adjust the member variables that are set to default values by <a class="el" href="structCZipAddNewFileInfo.html#a3">Defaults</a> method. 
<p>

<p>
Definition at line <a class="el" href="ZipArchive_8h-source.html#l00102">102</a> of file <a class="el" href="ZipArchive_8h-source.html">ZipArchive.h</a>.<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="o2" doxytag="CZipAddNewFileInfo::m_bFullPath"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool <a class="el" href="structCZipAddNewFileInfo.html#o2">CZipAddNewFileInfo::m_bFullPath</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
It has only the meaning when <a class="el" href="structCZipAddNewFileInfo.html#o1">m_szFileNameInZip</a> is not specified and <a class="el" href="structCZipAddNewFileInfo.html#o0">m_szFilePath</a> is not empty. 
<p>
<ul>
<li>if <code>true</code>, include full path of the file inside the archive (even if #m_szRootPath is set)<br>
</li></ul>
<p>
<ul>
<li>if <code>false</code> only the filename without a path is stored in the archive <br>
</li></ul>
<p>
in this case if #m_szRootPath is set previously with #SetRootPath and if the beginning of <a class="el" href="structCZipAddNewFileInfo.html#o0">m_szFilePath</a> equals #m_szRootPath then the filename is set to the remaining part of m_szFilePath (you can say to m_lpszFilePath minus #m_szRootPath)
<p>
Definition at line <a class="el" href="ZipArchive_8h-source.html#l00145">145</a> of file <a class="el" href="ZipArchive_8h-source.html">ZipArchive.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o5" doxytag="CZipAddNewFileInfo::m_iReplaceIndex"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="structCZipAddNewFileInfo.html#o5">CZipAddNewFileInfo::m_iReplaceIndex</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
the index of the existing file in the archive to be replaced by the file being added (the new file goes into the same physical place as the old file - the archive may of course grow or shrink as a result) 
<p>
<ul>
<li>&gt;= 0 the index of the file to be replaced</li><li>-1 do not replace any file and add the new file at the end of the archive (default)</li><li>-2 if the new file has the same name as a file already in the archive then replace it or add at the end of the archive if it's filename is unique; it uses <a class="el" href="classCZipArchive.html#a43">CZipArchive::FindFile</a> with the arguments <em>iCaseSensitive</em> and <em>bFileNameOnly</em> set to default values</li></ul>
<p>
<dl compact><dt><b>Note:</b></dt><dd><ul>
<li>you replace files in disk-spanning archives (i.e. use a value different from -1)</li><li>if the space size taken by the old file is different from the space size needed by the new file, the callback is called while moving data (see <a class="el" href="classCZipArchive.html#w41w11">CZipArchive::cbReplace</a>)</li><li>this replaces the file physically, so no information from the file being replaced is retained (such as attributes, modification time, etc.)</li><li>if you use an invalid index, the function will fail; if you specify the last file in the archive to be replaced, it'll be removed and the usual action taken</li><li>the new file encryption does not depend on the old file encryption but only on the current password settings (see <a class="el" href="classCZipArchive.html#a2">CZipArchive::SetPassword</a>)</li><li>if <a class="el" href="structCZipAddNewFileInfo.html#o3">m_iComprLevel</a> is not 0 then a temporary archive is created in the temporary directory (see <a class="el" href="classCZipArchive.html#a60">CZipArchive::SetTempPath</a>) or in the memory (if you use <a class="el" href="classCZipArchive.html#w43w25">CZipArchive::zipsmMemoryFlag</a> in <a class="el" href="structCZipAddNewFileInfo.html#o4">m_iSmartLevel</a>)</li><li><b>the most complicated scenario </b>is when you try to replace the file and use <a class="el" href="classCZipArchive.html#w43w24">CZipArchive::zipsmCheckForEff</a> flag in <a class="el" href="structCZipAddNewFileInfo.html#o4">m_iSmartLevel</a> and the file compression proves to be inefficient (you can use the sample application <em>ZipArc</em> to observe the following process):<ul>
<li>first you get <a class="el" href="classCZipArchive.html#w41w1">CZipArchive::cbAdd</a> callback - the file is being compressed to a temporary archive,</li><li>then the file compression proves to be inefficient and the file needs to be stored instead of compressed, but first the space inside archive must be adjusted to fit the file being added in the place of file being replaced - you get <a class="el" href="classCZipArchive.html#w41w11">CZipArchive::cbReplace</a>,</li><li>then, at the end, the file is being stored - you get <a class="el" href="classCZipArchive.html#w41w3">CZipArchive::cbAddStore</a> callback</li></ul>
</li></ul>
</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>SetAdvanced <p>
<a class="el" href="classCZipArchive.html#a62">CZipArchive::WillBeDuplicated</a></dd></dl>

<p>
Definition at line <a class="el" href="ZipArchive_8h-source.html#l00189">189</a> of file <a class="el" href="ZipArchive_8h-source.html">ZipArchive.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o7" doxytag="CZipAddNewFileInfo::m_pFile"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">CZipAbstractFile* <a class="el" href="structCZipAddNewFileInfo.html#o7">CZipAddNewFileInfo::m_pFile</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
instead of from a physical file, the data for compression is taken from the CZipAbstractFile object (e.g. 
<p>
from <a class="el" href="classCZipMemFile.html">CZipMemFile</a>)<p>
<dl compact><dt><b>Note:</b></dt><dd><ul>
<li>you have to leave <a class="el" href="structCZipAddNewFileInfo.html#o0">m_szFilePath</a> empty if you set <a class="el" href="structCZipAddNewFileInfo.html#o7">m_pFile</a> to not NULL</li><li>the time of the file in zip is set to the current time, and the attributes to the default file attributes (depending on the system)</li><li>you cannot add directories this way</li></ul>
</dd></dl>

<p>
Definition at line <a class="el" href="ZipArchive_8h-source.html#l00205">205</a> of file <a class="el" href="ZipArchive_8h-source.html">ZipArchive.h</a>.    </td>
  </tr>
</table>
<hr>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="ZipArchive_8h-source.html">ZipArchive.h</a></ul>
<hr><address><small>
ZipArchive Copyright &copy;&nbsp;2000-2005 <a href="mailto:tdracz@artpol-software.com"> Tadeusz Dracz </a>. Generated at Fri Aug 5 21:44:51 2005.
</small></address>
</body>
</html>
